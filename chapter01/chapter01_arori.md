## 1.1 HTTP: 인터넷의 멀티미디어 배달부

- HTTP는 전세계의 서버로부터 대량의 정보를 빠르고, 간편하고, 정확하게 사람들의 PC에 설치된 웹 브라우저로 옮겨준다.
- HTTP는 신뢰성 있는 데이터 전송 프로토콜을 사용하기 때문에, 전송 중 손상되거나 꼬이지 않음을 보장
    - 신뢰성 있는 전송은 인터넷 애플리케이션 개발자가 HTTP 통신 중에 결함이나 약점에 대한 걱정 없이 기능을 구현하는 데에 집중

## 1.2 웹 클라이언트와 서버

- 웹 서버(HTTP 프로토콜로 의사소통하기 때문에 보통 HTTP 서버라고 칭함)
    - 데이터를 저장하고, 요청한 데이터(요청 받은 객체의 타입, 길이 등의 정보)를 HTTP 응답으로 제공
- 클라이언트(ex: 웹 브라우저)
    - 서버에 HTTP 요청을 보냄

## 1.3 리소스

- 웹 리소스: 웹 콘텐츠의 원천으로, 웹 서버에서 관리하고 제공하는 대상.
    - 어떤 종류의 콘텐츠도 리소스가 될 수 있다. 리소스의 예:
        - 웹 서버 파일 시스템의 정적 파일(텍스트, HTML, 워드, 이미지, 동영상 파일 등),
        - 동적 콘텐츠(공공 도서관 탐색 웹게이트, 인터넷 검색엔진 등)

### 1.3.1 미디어타입

- MIME(Multipurpose Internet Mail Extensions, 다목적 인터넷 메일 확장) 타입: 웹상에서 전송되는 객체에 붙이는 데이터 포맷 라벨.
    - 원래는 전자 메일 시스템 사이에서 메세지가 오갈 때 겪는 문제점 해결을 위해 설계 되었으나, 잘 동작하여 HTTP 멀티미디어 콘텐츠를 기술하고 라벨링하기 위해 채택.
- 웹 서버는 모든 HTTP 객체 데이터에 MIME 타입을 붙이고, 웹 브라우저는 돌려받은 객체를 다룰 수 있는지 MIME  타입을 통해 확인.
- MIME은 주 타입(primary object type)과 부 타입(specific subtype)을 슬래시로 구분한 문자열 라벨. 
    - text/html: HTML 텍스트 문서
    - text/plain: plain ASCII 텍스트 문서
    - image/jpeg: JPEG 이미지
    - image/gif: GIF 이미지
    - video/quicktime: 애플 퀵타임 동영상
    - application/vnd.ms-powerpoint:  마이크로소프트 파워포인트 프레젠테이션

### 1.3.2 URI

- URI(Uniform Resource Identifier, 통합 자원 식별자): 서버 리소스 이름으로, URL, URN 두 가지가 있음. 주로 URI와 URL을 같은 의미로 사용.
    - 웹 서버 리소스는 각자 이름을 갖고 있으므로, 클라이언트에서 리소스를 지목 가능.

### 1.3.3 URL

- URL(Uniform Resource Locator, 통합 자원 지시자): 리소스 식별자의 가장 흔한 형태로, 특정 서버의 한 리소스에 대한 구체적 위치 서술. 오늘날 대부분의 URI는 URL.

    ```
    http://(1)www.joes-hardware.com(2)/specials/saw-blade.gif(3)
    ```

    1. 스킴(Scheme): 리소스에 접근하기위한 프로토콜 서술. 보통 HTTP 프로토콜(http://) 사용
    2. 두번째 부분은 인터넷 주소 제공
    3. 웹 서버의 리소스 

### 1.3.4 URN

- URN(Uniform Resource Name, 통합 자원 이름): 리소스 위치에 독립적인 유니크한 리소스 이름 역할.
    - ex: 다음 URN은 위치와 상관없이, 혹은 여러 군데 복사 되었다하더라도 리소스 지칭하기 위해 사용할 수 있다.

        ```
        urn:ietf:rfc:2141
        ```

    - 실험중인 상태로 아직 널리 채택 되지 않음.

## 1.4 트랜잭션

- 트랜잭션: 요청 명령, 응답 결과의 쌍.
- 트랜잭션은 HTTP 메시지라고 불리는 정형화된 데이터 덩어리를 통해 이루어짐.

### 1.4.1 메서드

- HTTP 메서드:  HTTP는 HTTP 메서드라는 여러 종류의 요청 명령을 지원. 모든 HTTP 요청 메세지는 한개의 메서드를 포함. 서버가 어떤 동작을 취햐애하는지 말해준다.
- 자주 사용하는 HTTP 메서드
    - GET: 서버에서 클라이언트에 지정한 리소스 전송
    - PUT: 클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장
    - DELETE: 지정한 리소스를 서버에서 삭제
    - POST: 클라이언트 데이터를 서버게이트웨이 애플리케이션으로 전송
    - HEAD: 지정한 리소스에 대한 응답에서 HTTP 해더만 전송

### 1.4.2 상태코드

- HTTP 응답 메세지는 상태 코드와 함께 반환. 클라이언트에게 요청 성공 여부나 추가 조치 여부를 알려주는 세 자리 숫자.
    - 흔히 쓰이는 상태 코드
        - 200 OK: 문서가 올바르게 반환
        - 302 Found: 다른 곳에서 리소스를 가져올 것(redirect)
        - 404 Not Found: 리소스를 찾을 수 없음
- HTTP는 각 숫자 상태 코드와 텍스트로된 "사유 구절(reason phrase)"를 함께 전송. 단순 설명용으로 응답 처리에는 숫자로된 상태 코드 사용.

### 1.4.3 웹 페이지는 여러 객체로 이루어 질 수 있다

- 애플리케이션은 보통 하나의 작업을 수행하기 위해 여러 HTTP 트랙잭션을 수행.
    - 일반적인 예시: 기본적인 HTML 트랜잭션 수행, 이미지, 자바 애플릿등의 추가 HTTP 트랜잭션 수행

## 1.5 메시지

- HTTP 메시지는 줄단위 문자열로, 이진 형식이 아닌 일반 텍스트.
- HTTP 요청 메시지(클라이언트→서버) HTTP 응답 메시지(서버→클라이언트)

- 메세지의 구성 요소
    - 시작줄: 요청이라면 무엇을 해야하는지, 응답이라면 무슨 일이 일어났는지 나타냄.
    - 헤더: 0개 이상. 각 헤더 필드는 쉬운 구문 분석을 위해 콜론(:)으로 구분되어있는 key-value 값으로 구성. 빈줄로 끝냄.
    - 본문: 필요에 따라 요청, 응답 메세지에 추가될 수 있음. 시작줄이나 헤더와 달리 이진 데이터도 포함 가능.

## 1.6 TCP 커넥션

- TCP(Transmission Control Protocol, 전송 제어 프로토콜)

### 1.6.1 TCP/IP

- HTTP: 애플리케이션 계층 프로토콜.
    - 통신의 세부사항은 TCP/IP에 위임.
- TCP: 전송 계층 프로토콜로, 신뢰성있는 전송을 위해 다음을 제공
    - 오류 없는 데이터 전송
    - 순서에 맞는 데이터 전달.
    - 조각나지 않는 데이터 스트림(어떤 크기로도 보낼 수 있다.)
- IP: 네트워크 계층 프로토콜.

### 1.6.2 접속, IP 주소 그리고 포트번호

- 인터넷 프로토콜(Internet Protocol, IP)로 IP주소와 포트 번호를 통해 클라이언트와 서버 사이의 TCP/IP 커넥션을 맺는다.
- IP주소와 포트번호는 URL을 통해 알아낼 수 있다.
    - IP주소가 아니라 도메인 이름 혹은 호스트 명이라면 **DNS(Domain Name Service)**를 통해 IP로 변환
- 웹 브라우저가 HTTP를 통해 리소스를 가져오는 순서
    1. 웹 브라우저는 서버의 URL에서 호스트명 추출
    2. 웹 브라우저는 서버의 호스트명을 IP로 전환
    3. 웹 브라우저는 URL에 포트번호가 있다면 추출
    4. 웹 브라우저는 IP, 포트번호로 TCP 커넥션을 맺음
    5. 웹 브라우저는 서버에 HTTP 요청 
    6. 서버는 웹 브라우저에 HTTP 응답
    7. 커넥션이 닫히면, 웹 브라우저는 문서를 보여준다 

## 1.7 프로토콜 버전

HTTP 프로토콜 버전은 여러가지로 다음과 같다

1. HTTP/0.9 
    - 디자인 결함 다수. 구식 클라이언트에서만 작동. GET 메서드만 지원, MIME, HTTP 헤더, 버전 번호 지원 하지 않음.
    - 간단한 HTML객체를 받아오기위해 디자인 된 것으로, HTTML/1.0으로 금방 대체 됨
2. HTTP/1.0
    - 처음으로 널리 쓰이기 시작한 버전으로, HTTP 헤더, 추가 메서드, 멀티미디어 객체 처리 추가
    - 잘 정의된 명세보다는 HTTP가 급성장하던 시기에 만들어진 잘 동작하는 용례 모음에 가까움
3. HTTP/1.0+
    - "keep-alive" 커넥션, 가상 호스팅 지원, 가상 호스팅, 프록시 연결 지원 등이 추가됨.
4. HTTP/1.1
    - 설계의 구조적 결함 교정, 성능 최적화, 잘못된 기능 제거에 집중한 버전.
5. HTTP/2.0
    - 1.1의 성능개선을 위해 구글의 SPDY 프로토콜 기반으로 설계가 진행중인 차세대 프로토콜.

## 1.8 웹의 구성요소

### 1.8.1 프록시

- 클라이언트와 서버 사이에 위치한 HTTP 중계장으로 클라이언트의 HTTP 요청을 받아 서버에 (보통 수정하여) 전달.
- 보안 용도로 사용. 요청과 응답을 필터링

### 1.8.2 캐시

- 많이 찾는 데이터를 사본으로 저장.
- 캐시 프록시: 캐시된 데이터를 저장하는 특별한 종류의 HTTP 프록시 서버. 멀리 떨어진 웹 서버보다 더 빠르게 받을 수 있다.
- HTTP는 캐시를 효율적으로 동작하게 하고 캐시된 콘텐츠를 최신으로 유지하면서도 프라이버시를 보호하기 위한 기능을 정의

### 1.8.3 게이트웨이

- 다른 서버의 중개자로 동작하는 특별한 종류의 서버로, 주로 HTTP 트래픽을 다른 프로토콜로 변환하기위해 사용.
- 언제나 스스로 리소스를 가지고 있는 서버처럼 요청을 다르므로, 클라이언트는 게이트웨이와 통신하고 있음을 모름
- 예: HTTP/FTP 게이트웨이
    - FTP URI에 대한 HTTP 요청을 받아들인 뒤, FTP 프로토콜로 문서 가져오기. 이후 HTTP 메세지에 담아 클라이언트에 전송.

### 1.8.4 터널

- 두 커넥션 사이의 raw 데이터를 그대로 전달하는 HTTP 어플리케이션. 주로 비 HTTP 데이터를 하나 이상의 HTTP 연결을 통해 전해주는 용으로 사용.
- HTTP 터널을 활용하는 대표적인 예
    - SSL 트래픽을 HTTP 커넥션으로 전송하여, 웹 트래픽만 허용하는 사내 방화벽 통과시키기.
    - HTTP/SSL 터널은 HTTP 요청을 받아 목적지의 주소와 포트번호로 커넥션을 맺음. 이후부터는 암호화된 SSL 트래픽을 HTTP 채널을 통해 목적지 서버로 전송.

### 1.8.5 에이전트

- 사용자 에이전트(User Agent, 혹은 그냥 에이전트): 사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램. 즉 웹 요청을 만드는 애플리케이션은 뭐든 HTTP 에이전트
- 에이전트의 예
    - 웹 브라우저(대표적)
    - 웹 로봇(혹은 스파이더): 사람의 통제없이 HTTP 트랜잭션을 일으키고 콘텐츠를 받아오는 자동화 사용자 에이전트